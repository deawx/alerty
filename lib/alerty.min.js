!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Alerty=t()}(this,function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();return function(){function n(){var t=this;e(this,n),this.noop=function(){},this.defaults={okLabel:"确定",cancelLabel:"取消",time:2e3,maskClosable:!0,escClosable:!0,btnFocus:!0,inputPlaceholder:"",inputValue:"",inputType:"text"},this.modal=null,this.container=null,this.resolve=null,this.reject=null,this.bindKeydown=null,this.alert=function(e,n){return t.init("alert",e,n)},this.confirm=function(e,n){return t.init("confirm",e,n)},this.prompt=function(e,n){return t.init("prompt",e,n)}}return t(n,[{key:"init",value:function(e,t,n){var i=this;return this.type=e,this.msg=t,this.options=Object.assign({},this.defaults,n),this.open(),new Promise(function(e,t){i.resolve=e,i.reject=t})}},{key:"open",value:function(){var e=this.options;e.maskClosable,e.escClosable,e.btnFocus;this.container=document.createElement("div"),this.container.innerHTML=this.renderDOM(),document.body.classList.add("no-scrolling"),this.container.classList.add("alerty-container","active"),document.body.appendChild(this.container),this.modal=document.querySelector(".alerty"),this.modal.classList.add("alerty-show"),this.setFocus(),this.bindEvents()}},{key:"renderDOM",value:function(){var e=this.options,t=this.type,n=this.msg,i=e.title,o=e.okLabel,s=e.cancelLabel,r=e.inputValue,l=e.inputPlaceholder,c=e.inputType,a="alert"===t?'\n      <button type="" class="btn-ok">'+o+"</button>\n    ":'\n      <button type="" class="btn-ok">'+o+'</button>\n      <button type="" class="btn-cancel">'+s+"</button>\n    ";return('\n      <div class="alerty">\n        '+(i?'<div class="alerty-title">'+i+"</div>":"")+'\n        <div class="alerty-content">\n          <p class="alerty-message">'+n+"</p>\n          "+("prompt"===t?'\n      <div class="alerty-prompt">\n        <input type='+c+' placeholder="'+l+'" value="'+r+'" autofocus>\n        <div class="input-line"></div>\n      </div>\n    ':"")+'\n        </div>\n        <div class="alerty-action">\n          '+a+"\n        </div>\n      </div>\n    ").replace(/(^|\n)\s*/g,"")}},{key:"bindEvents",value:function(){var e=this,t=this.container,n=this.modal,i=this.options,o=this.type,s=i.maskClosable,r=i.escClosable,l=n.querySelector(".btn-ok"),c=n.querySelector(".btn-cancel"),a=n.querySelector("input");l.addEventListener("click",function(){e.close(),e.resolve&&setTimeout(function(){"prompt"===o?e.resolve(a.value):e.resolve()},200)}),c&&c.addEventListener("click",function(){e.close(),e.reject&&setTimeout(function(){return Promise.resolve(e.reject())},200)}),s&&t.addEventListener("click",function(n){return n.target===t&&e.close()}),r&&(this.bindKeydown=function(t){return 27===t.keyCode&&e.close()},document.body.addEventListener("keydown",this.bindKeydown))}},{key:"setFocus",value:function(){var e=this.type,t=this.options,n=this.modal,i=n.querySelector(".btn-ok"),o=n.querySelector("input");"prompt"===e?o.focus():t.btnFocus&&i.focus()}},{key:"close",value:function(){var e=this,t=this.modal,n=this.container;this.resolve,this.reject;t.classList.remove("alerty-show"),t.classList.add("alerty-hide"),n.classList.remove("active"),document.body.classList.remove("no-scrolling"),setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n),e.bindKeydown&&document.body.removeEventListener("keydown",e.bindKeydown)},100)}}]),n}()}),window.alerty=new Alerty;
