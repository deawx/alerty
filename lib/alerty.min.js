!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Alerty=e()}(this,function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();return function(){function n(){var e=this;t(this,n),this.noop=function(){},this.defaults={okLabel:"确定",cancelLabel:"取消",maskClosable:!0,escClosable:!0,btnFocus:!0,inputPlaceholder:"",inputValue:"",inputType:"text",toastDuration:2e3},this.modal=null,this.container=null,this.resolve=null,this.reject=null,this.bindKeydown=null,this.alert=function(t,n){return e.init("alert",t,n)},this.confirm=function(t,n){return e.init("confirm",t,n)},this.prompt=function(t,n){return e.init("prompt",t,n)},this.toasts=function(t,n){return e.init("toasts",t,n)}}return e(n,[{key:"init",value:function(t,e,n){var o=this;return this.type=t,this.msg=e,this.options=Object.assign({},this.defaults,n),this.open(),new Promise(function(t,e){o.resolve=t,o.reject=e})}},{key:"open",value:function(){this.container=document.createElement("div");var t=this.container,e=this.options;e.maskClosable,e.escClosable,e.btnFocus;t.innerHTML=this.renderDOM(),document.body.appendChild(t),t.classList.add("alerty-container"),this.modal=document.querySelector(".alerty"),this.modal.classList.add("alerty-show"),"toasts"===this.type?t.classList.add("toasts"):(t.classList.add("active"),document.body.classList.add("no-scrolling"),this.setFocus()),this.bindEvents()}},{key:"renderDOM",value:function(){var t=this.options,e=this.type,n=this.msg,o=t.title,s=t.okLabel,i=t.cancelLabel,l=t.inputValue,r=t.inputPlaceholder,a=t.inputType,c="alert"===e?'\n      <button type="" class="btn-ok">'+s+"</button>\n    ":'\n      <button type="" class="btn-ok">'+s+'</button>\n      <button type="" class="btn-cancel">'+i+"</button>\n    ";return('\n      <div class="alerty">\n        '+(o?'<div class="alerty-title">'+o+"</div>":"")+'\n        <div class="alerty-content">\n          <p class="alerty-message">'+n+"</p>\n          "+("prompt"===e?'\n      <div class="alerty-prompt">\n        <input type='+a+' placeholder="'+r+'" value="'+l+'" autofocus>\n        <div class="input-line"></div>\n      </div>\n    ':"")+"\n        </div>\n        "+("toasts"!==e?'\n          <div class="alerty-action">\n            '+c+"\n          </div>\n        ":"")+"\n      </div>\n    ").replace(/(^|\n)\s*/g,"")}},{key:"bindEvents",value:function(){var t=this,e=this.container,n=this.modal,o=this.options,s=this.type,i=o.maskClosable,l=o.escClosable,r=o.toastDuration,a=n.querySelector(".btn-ok"),c=n.querySelector(".btn-cancel"),u=n.querySelector("input"),d=void 0;"toasts"===s&&(d=setTimeout(function(){t.close(),t.resolve&&setTimeout(function(){return t.resolve()},200)},r)),a&&a.addEventListener("click",function(){t.close(),t.resolve&&setTimeout(function(){"prompt"===s?t.resolve(u.value):t.resolve()},200)}),c&&c.addEventListener("click",function(){t.close(),t.reject&&setTimeout(function(){return t.reject()},200)}),i&&e.addEventListener("click",function(n){n.target===e&&t.close(),"toasts"===s&&setTimeout(function(){clearTimeout(d),t.resolve&&t.resolve()},200)}),l&&"toasts"!==s&&(this.bindKeydown=function(e){return 27===e.keyCode&&t.close()},document.body.addEventListener("keydown",this.bindKeydown))}},{key:"setFocus",value:function(){var t=this.type,e=this.options,n=this.modal,o=n.querySelector(".btn-ok"),s=n.querySelector("input");"prompt"===t?s.focus():e.btnFocus&&o.focus()}},{key:"close",value:function(){var t=this,e=this.modal,n=this.container;this.resolve,this.reject;e.classList.remove("alerty-show"),e.classList.add("alerty-hide"),n.classList.remove("active"),document.body.classList.remove("no-scrolling"),setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n),t.bindKeydown&&document.body.removeEventListener("keydown",t.bindKeydown)},100)}}]),n}()}),window.alerty=new Alerty;
